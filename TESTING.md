# 測試指南

## 🎮 視覺效果測試

### 你應該看到的畫面

#### 1. **選歌畫面**
- 兩個歌曲卡片（Demo Song、Digital Dreams）
- 難度標籤（EASY、HARD）
- 連線狀態指示器

#### 2. **遊戲畫面（點擊歌曲後）**

**立即應該出現**：
```
┌───────────────────────────────┐
│   咖啡色麵包板背景            │
│   + 佈滿小孔洞的紋理          │
│                               │
│  ○  ○  ○  ○  ← 5個LED（暗）  │
│  ○  ○  ○  ○                  │
│  ○  ○  ○  ○                  │
│  ○  ○  ○  ○                  │
│  ○  ○  ○  ○                  │
│                               │
│ ═══════════════ ← 紅色判定線  │
│                               │
│  🔴  🔴  🔴  🔴  ← 按鈕       │
│   D   F   J   K  ← 鍵位標籤  │
│                               │
│      準備開始...              │
│   使用 D F J K 鍵遊玩         │
└───────────────────────────────┘
```

**遊戲開始後**：
- LED 開始依序亮起（青藍色發光）
- 從上往下像流水一樣
- 到達底部時該按按鈕

### 🖱️ 操作方式

#### 方式 1: 鍵盤（推薦）
```
D 鍵 → 軌道 1（最左邊）
F 鍵 → 軌道 2
J 鍵 → 軌道 3
K 鍵 → 軌道 4（最右邊）
```

#### 方式 2: 滑鼠點擊
- 直接點擊 Canvas 上對應的軌道區域
- 或點擊底部的紅色按鈕

## 🔍 調試檢查

### 打開瀏覽器開發者工具（F12）

#### Console 應該顯示：
```
🎮 Game renderer initialized
Canvas size: 800 x 600
✅ Connected to server
🎮 Starting game with chart: Demo Song
LED states initialized: 4 lanes
Total notes: 23
```

#### 如果看到錯誤：
- 紅色錯誤訊息 → 記下錯誤內容
- `Cannot read property...` → 可能是初始化順序問題
- `WebSocket error` → 檢查伺服器是否運行

### Network 標籤
- 應該看到 WebSocket 連線（ws://localhost:3000）
- 狀態應該是綠色（已連線）

## ❌ 常見問題排除

### 問題 1: 畫面完全黑色

**可能原因**：
1. Canvas 沒有初始化
2. JavaScript 錯誤

**解決方法**：
```bash
# 1. 硬性重新整理（清除快取）
Ctrl + Shift + R  (Windows/Linux)
Cmd + Shift + R   (Mac)

# 2. 檢查 Console 錯誤
F12 → Console 標籤

# 3. 重啟伺服器
npm start
```

### 問題 2: 看到麵包板但 LED 沒有亮

**症狀**：背景是咖啡色，但 LED 一直是灰色

**解決**：
1. 檢查 Console 是否有 "LED states initialized"
2. 確認有音符資料（Total notes > 0）
3. 等待 1-2 秒讓第一個音符出現

### 問題 3: 按鈕沒有反應

**症狀**：按 D/F/J/K 或點擊滑鼠沒有效果

**解決**：
1. 確認遊戲已開始（不在選歌畫面）
2. 確認焦點在網頁上（點一下網頁任意處）
3. 嘗試滑鼠點擊

### 問題 4: 伺服器錯誤

**症狀**：終端機顯示錯誤或 MISS

**這是正常的**！
- MISS 表示音符已經過了但你沒按
- 這證明遊戲邏輯正在運作
- 專心看 LED 什麼時候到底部，然後按鍵

## ✅ 功能測試清單

### 視覺測試
- [ ] 麵包板背景顯示（咖啡色）
- [ ] 麵包板孔洞紋理可見
- [ ] 20 個 LED 正確顯示（4×5）
- [ ] LED 熄滅時是深灰藍色
- [ ] LED 腳位顯示（兩條小線）
- [ ] 4 個紅色按鈕在底部
- [ ] 按鈕上有 D/F/J/K 標籤
- [ ] 判定線是紅色且有光暈

### 動畫測試
- [ ] LED 依序從上往下亮起
- [ ] LED 亮起時是青藍色
- [ ] LED 有發光光暈效果
- [ ] 按鈕按下時有 3D 按壓動畫
- [ ] 判定文字出現（PERFECT/GREAT/GOOD/MISS）
- [ ] 分數和連擊數更新

### 互動測試
- [ ] D 鍵控制第 1 軌道
- [ ] F 鍵控制第 2 軌道
- [ ] J 鍵控制第 3 軌道
- [ ] K 鍵控制第 4 軌道
- [ ] 滑鼠點擊可以操作
- [ ] 按鈕有視覺回饋

### 遊戲流程測試
- [ ] 選歌畫面正常
- [ ] 點擊歌曲進入遊戲
- [ ] 遊戲能正常進行
- [ ] 能看清楚 LED 下落
- [ ] 能判斷何時該按鍵
- [ ] 遊戲結束顯示結果
- [ ] 能返回選歌畫面

## 🎯 預期行為

### 完美的一次遊玩

1. **開始**
   - 點擊 "Demo Song"
   - 畫面切換到遊戲畫面
   - 看到麵包板背景 + 所有 LED 熄滅

2. **第一個音符**（1 秒後）
   - 第 1 軌道的最上方 LED 亮起
   - 青藍色發光
   - 開始往下移動

3. **音符下落**
   - LED 1 亮 → LED 2 亮 → ... → LED 5 亮
   - 約 2 秒內完成下落

4. **判定時機**
   - 當最下方的 LED 亮起時
   - 立即按 D 鍵（或點擊第 1 軌道）
   - 看到 "PERFECT" 文字彈出
   - 分數增加
   - 連擊 +1

5. **持續遊玩**
   - 重複步驟 2-4
   - 注意多個軌道可能同時有音符
   - 保持連擊

6. **遊戲結束**
   - 30 秒後結束
   - 顯示統計畫面
   - 看到 Perfect/Great/Good/Miss 數量

## 📸 截圖參考

### 正確的畫面應該看起來像這樣：

```
正確 ✅:
- 背景是咖啡色（不是黑色）
- 可以看到孔洞紋理
- LED 是圓形（不是方形）
- 按鈕是紅色圓形，有立體感
- LED 亮起時非常明顯（青藍色發光）

錯誤 ❌:
- 全黑畫面
- 沒有 LED
- 沒有按鈕
- LED 不會亮
```

## 🎬 建議測試流程

### 第一次測試（3 分鐘）

1. 開啟遊戲
2. 查看選歌畫面
3. 點擊 "Demo Song"
4. 觀察麵包板背景
5. 等待第一個音符
6. 看 LED 亮起
7. 在適當時機按 D 鍵
8. 觀察判定結果

### 完整測試（10 分鐘）

1. 測試所有視覺元素
2. 嘗試 EASY 難度
3. 嘗試 HARD 難度
4. 測試鍵盤操作
5. 測試滑鼠操作
6. 故意按錯看 MISS
7. 嘗試打出 PERFECT
8. 玩到結束看結果畫面

## 📊 效能監控

在 Chrome 開發者工具的 Performance 標籤：

- **FPS**: 應該穩定在 60
- **Frame Time**: < 16.67ms
- **CPU Usage**: < 50%

如果 FPS 低：
- 減少孔洞紋理密度
- 降低 Canvas 解析度
- 關閉其他應用程式

## 💡 小技巧

### 容易打出 PERFECT
1. 不要看音符，看 LED
2. 當最下方 LED 亮起時立即按
3. 保持節奏感
4. EASY 難度間隔較長，比較容易

### 錄影展示
1. 全螢幕模式（F11）
2. 開啟 OBS 或螢幕錄影
3. 慢速播放強調 LED 下落效果
4. 特寫按鈕按壓動畫

---

## 🐛 回報問題

如果遇到問題，請提供：

1. **瀏覽器**: Chrome/Firefox/Safari
2. **作業系統**: Windows/Mac/Linux
3. **Console 錯誤訊息**: 完整的錯誤文字
4. **截圖**: 顯示畫面狀態
5. **操作步驟**: 如何重現問題

---

祝測試順利！🎮✨
